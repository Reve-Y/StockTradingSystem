## 03.28   
  待解决问题：   
#### 1. 股票信息页面 :    
a. 折线图数据对不上，改进：显示当天9点-11点，1点到3点的行情，增加一个按钮，切换显示历史行情。   
b. 排版定下来，展示信息排版不确定，输入表单未确定		1~2天

#### 2. 后台页面   
a. 更新用户信息已完成 

b. 自助开户已完成。  

c. 持仓信息查询未开始写（包括持有证券信息和资金账号余额等）	

d. 后台管理 首页 还没确定显示哪些信息  （基本信息可以考虑）	1~2 天

e. 3个页面尚未确定展示内容    
（1） 考虑增加：展示历史操作信息记录（时间、买入\卖出\撤单 、股票信息、多少股）	?    
（2） "所有委托"查询，包括已成交的、未成交的、废弃的和已经撤销的。			尚未设计表   
（3） 委托查单、当前委托查询 ： 点击撤单按钮撤单，从当前委托序列中删除，记录插入"所有委托"表中。		尚未设计表    
（4） add new post 作为保留，后面再看能做什么。

f. 用户下拉菜单修改，换一些菜单。(1 h )   
管理员后台先不写,准备删除消息提醒（已删除），后期增加搜索功能

#### 3.hlep、about页面最后再写。（五月份）
 
#### 4.fix（考虑中）   
？？ 前台表单传入fix格式申报数据  ， 后台解码然后插入数据库待分析。 没有指令审批、分发、下达等操作了。   
或者不用fix，就使用简单的instruction指令表。

#### 5. 撮合系统 （5月实现）
后台读取未完成委托订单（待执行委托序列），然后定时执行，根据拟定的交易规则判断此笔交易是否生效，
	然后修改对应的表项，并修改此笔订单状态位的值，从当前委托序列中删除，记录插入"所有委托"表中。
  
  
## 03.31 四月份任务安排   
1. 先把股票信息页面下单安排好（考虑好传哪些参数给后台），主要是输入表单的设计。如果使用fix格式来传输，就要先了解fix怎么传。   
这个页面的实时股票信息展示怎么处理、股票基本信息的展示可以放到后面慢慢改。同时，记得增加一个按钮切换当日/历史行情图。

2. 做好之后，后台已经拿到委托数据了，如果是fix格式先解码。然后要设计数据库，包括以下：    
  a. **核心**,委托序列。即委托指令表，只存放有效的委托。参考tinstruction.后面设计的撮合系统读取此表来进行操作。   
  b. 所有委托表，包括委托的基本信息，和其他一些字段，比如状态：未成交/已成交/已撤单/系统废弃，时间等。   
  c. 历史成交信息，资金变动：包括委托的基本信息，和时间，以及委托完成后的资金情况。
  
3. 确定后台管理首页的展示内容。

4. 确定后台管理的功能列表，比如：首页、当前委托、持仓信息、成交记录、所有委托、add new post、修改信息、自助开户。

5. 确定好之后，一一实现。  
  a. 首页显示一些信息,如余额、ca信息等基本信息。 已实现
  b. “当前委托”打印表格式加上分页，并且每一项后面加上撤单按钮，撤单时alert弹窗确认。然后是**后台一系列的修改操作**。（如果时间充足 可以增加委托成功提醒功能。） 撤单已完成  
  c. 持仓信息显示目前持有的证券信息。   已实现
  d. 成交记录简单查表，分页。   已实现
  e. 所有委托简单查表，分页。   已实现
  f. 保留   
  g.h. 已实现。
  
6. 时间足够可以把管理员后台安排一下。主要是管理用户信息。

7. 打磨 stockinfo 页面

8. 完善细节：比如，开户前检查自动生成的证券账户、资金账号是否已存在等细节。

### 隨便想想  
  增持股票时，（证券代码一样）新增的股票不新开一条记录，在已有的基础上修改持有数量，然后改平均购入价格。

// 执行委托，返回 调用后此笔委托成交的数量
public static int doEntrust(CurrentEntrust entrust)
{
	// 根据委托方向调用不同的 具体方法
}

委托执行流程：
1. 读表（推送）
2. 

## 4.30记录   
1. ~~tholdings 持仓表 enable_amount可用数量 字段已增加~~
2. stockinfo 页面还剩下证券基本信息、十档行情没有排版，输入证券代码后更新折线图还没写，输入委托信息区域上面的一块还没想好干什么。
3. ~~检查自动生成的证券账户的合法性还没写，不过很快。已完成~~
4. 管理员后台不想写了。没什么意思  
5. ~~委托撤单的逻辑**不够全面**，要改.  已完成~~
6. 搜索 要不要实现还在考虑
7. 委托的执行过程(拟撮合)考虑中。